import * as log4js from "log4js";

export class SetLogger {
  public connectLogger(appJson: any) {
    console.info(appJson.app_name, "setHttpLogger", "HttpLogger已链接");
    const HTTP_FORMAT = "[span: :response-time] " + ":remote-addr - -" +
      ' ":method :url HTTP/:http-version"' +
      ' :status :content-length ":referrer"' +
      ' ":user-agent"';
    return log4js.connectLogger(log4js.getLogger("console"), { format: HTTP_FORMAT });
  }
  /**
   * 如果是开发模式，控制台输出有颜色的log，方便debug
   * @deprecated 过时，避免测试环境不能记录详细的日志时间且文件日志不能带色彩
   */
  public replaceConsole() {
    const logConfig: any = {
      appenders: [
      {
        layout: {
        pattern: "%[[%-5p]%] %d{hh:mm:ss.SSS} %[%m%]",
        type: "pattern",
        },
        type: "console",
      },
      ],
      replaceConsole: true,
    };
    log4js.configure(logConfig);
  }
}
